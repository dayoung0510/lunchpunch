<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Lunch Punch</title>


  <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet">
  <link href="css/site.css" rel="stylesheet">


  <link href="https://fonts.googleapis.com/css?family=Raleway:200,400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- 룰렛 -->
  <script type="text/javascript" src="js/Winwheel.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>




</head>

<body id="page-top">


  <nav class="navbar custom-nav navbar-expand-lg justify-content-center">
    <!-- <div class="container"> -->
    <!-- <div class="collapse navbar-collapse" id="navbarResponsive"> -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link custom-link" href="#play">PLAY</a>
      </li>
      <li class="nav-item">
        <a class="nav-link custom-link" href="#edit">EDIT</a>
      </li>
      <li class="nav-item">
        <a class="nav-link custom-link" href="#history">HISTORY</a>
      </li>
    </ul>
    <!-- </div> -->
    <!-- </div> -->
  </nav>


  <section id="play">
    <div class="container">

      <!-- 룰렛 -->
      <div class="row" style="height: 40%;">
        <div class="col-lg-12" style="height: 100%;">
          <div class="game-bg">

            <!-- <button onclick="randomPick()">시작</button> -->

            <div style="height: 10%;">
              <button id="spin_button" onClick="startSpin();">시작</button>
              <button onClick="resetWheel(); return false;">다시하기</button>
            </div>
              
            <div style="height: 90%; position: relative;">
              <img src="wheel_back.png" style="height: calc(100% - 10px); position: absolute; bottom: 10px; left: 50%; transform:translateX(-50%)">
              <canvas id="canvas" width="280" height="280" style="position: absolute; top: 9px; left: 50%; transform:translateX(-50%)"></canvas>
            </div>
          

            <!-- <div class="the_wheel" style="height: 100%;">
              <canvas id="canvas" width="434" height="434"></canvas>
            </div> -->


            <!-- <div class="power_controls">
              <button id="spin_button" onClick="startSpin();">시작</button>
              <button onClick="resetWheel(); return false;">다시하기</button>
            </div>
             -->
                <!-- <div width="438" height="582" class="the_wheel">
                  <canvas id="canvas" width="434" height="434"></canvas>
                </div> -->





          </div>
        </div>
      </div>

      <!-- 카테고리 -->
      <div class="row padding-top-05 justify-content-center" style="height: 40%;">
        <div class="col-lg-12 flex-center" style="height:10%;">
          <div class="category-title">NEW</div>
          <div class="category-title">DAILY</div>
          <div class="category-title">SPECIAL</div>
        </div>

        <div class="col-lg-12 flex-center" style="height: 90%;">
          <div class="category">
            <ul class="category-ul" id="ul-new"></ul>
          </div>
          <div class="category">
            <ul class="category-ul" id="ul-daily"></ul>
          </div>
          <div class="category">
            <ul class="category-ul" id="ul-special"></ul>
          </div>
        </div>
      </div>

      <!-- 담은항목 -->
      <div class="row" style="height: 19%; padding: 0 1%;">
        <div class="col-lg-12 basket">
          <div style="height: 15%;">담은항목</div>
          <div class="basket-div">
            <ul class="basket-ul"></ul>
          </div>
        </div>
      </div>
    </div>
  </section>





  <section id="edit">
    <div class="container">

      <!-- 메뉴추가 -->
      <div class="row" style="height: 20%;">
        <div class="col-lg-12 add-menu">
          <div class="input-group-prepend">

            <!-- 드롭다운 -->
            <select id="drdown-category" class="btn btn-outline-lightgray dropdown-toggle">
              <option value="new">NEW</option>
              <option value="daily">DAILY</option>
              <option value="special">SPECIAL</option>
            </select>
          
            <!-- 입력창 -->
            <input id="menu-input" type="text" class="form-control">

            <!-- 확인버튼 -->
            <div class="input-group-append">
              <button id="add-menu-btn" class="btn btn-lightgray btn-outline-secondary" type="button">
                <i class="fas fa-check"></i></button>
            </div>
          </div>


        </div>
      </div>

      <!-- 카테고리 -->
      <div class="row" style="height: 80%;">
        <div class="col-lg-12 show-menu">
          <div class="flex-center">
            <div class="category-title">NEW</div>
            <div class="category-title">DAILY</div>
            <div class="category-title">SPECIAL</div>
          </div>
        </div>


        <div class="col-lg-12 flex-center" style="height: 90%;">
          <div class="category">
            <ul class="category-ul" id="category-ul-new"></ul>
          </div>
          <div class="category">
            <ul class="category-ul" id="category-ul-daily"></ul>
          </div>
          <div class="category">
            <ul class="category-ul" id="category-ul-special"></ul>
          </div>
        </div>


      </div>
    </div>
  </section>






  <section id="history">
    <div class="container">
      <div class="row" style="height: 100%;">
        <div class="col-lg-12" style="height: 100%;">







          <div class="flex-end history-title" style="height: 15%;">HISTORY</div>
          <div class="history" style="height: 75%;">

            <ul class="history-ul">
              <li>
                <span class="date">1월30일 목요일</span>
                <span class="history-menu">어쩌구저쩌구</span>
              </li>
              <li>
                <span class="date">1월30일 수요일</span>
                <span class="history-menu">어쩌</span>
              </li>
              <li>
                <span class="date">1월3일 화요일</span>
                <span class="history-menu">어쩌구</span>
              </li>
            </ul>

          </div>






        </div>
      </div>
    </div>
  </section>










<script>

  //메뉴들 json에 담아 변수로 선언
  var menus = [
    {category : "new", name : "맘스터치"},
    {category : "special", name : "수제버거"},
    {category : "daily", name : "버거킹"},
    {category : "new", name : "김치찜"},
    {category : "new", name : "된장찌개"},
    {category : "special", name : "칼국수"},
    {category : "daily", name : "미스터피자"},
    {category : "daily", name : "샐러드"},
    {category : "daily", name : "치킨"},
    {category : "daily", name : "카모메"},
    {category : "daily", name : "김가네"}
  ];


  var menusForGame = [];



function showList(){

    //위 변수에 있는 메뉴들 li형태로 보여주기
    for(var i=0; i<menus.length; i++){

    if(menus[i].category === "new") {
      //1단 카테고리에 보여주기
      $("#ul-new").append("<li> <input type='checkbox' class='chk-menu' id= chk" + i + "> <span>" + menus[i].name + "</span> </li>");
  

      //3단 카테고리에 보여주기
      $("#category-ul-new").append("<li>" + "<span>" + menus[i].name + "</span>" + "<span>" +"<i class='fas fa-times del-icon'>");
    }

    else if(menus[i].category === "special") {
      $("#ul-special").append("<li> <input type='checkbox' class='chk-menu' id= chk" + i + "> <span>" + menus[i].name + "</span> </li>");
      $("#category-ul-special").append("<li>" + "<span>" + menus[i].name + "</span>" + "<span>" +"<i class='fas fa-times del-icon'>");
    }

    else{
      $("#ul-daily").append("<li> <input type='checkbox' class='chk-menu' id= chk" + i + "> <span>" + menus[i].name + "</span> </li>");
      $("#category-ul-daily").append("<li>" + "<span>" + menus[i].name + "</span>" + "<span>" +"<i class='fas fa-times del-icon'>");
    }

  }

}

  showList();
  checkChange();






function checkChange(){
  //전체 체크박스 변화 감지
  $('.chk-menu').change(function() {

  //어레이 초기화
  menusForGame = new Array();

  //몇 번째 박스가 체크됐는지 확인
  for(var k=0; k<menus.length; k++){ 
    
    if($("#chk"+k).is(":checked")) { 

    //체크된 박스를 menusForGame 어레이에 넣기
    menusForGame.push(" " + menus[k].name + " "); 
    
    }
}

  // 담은항목 li 초기화
  $(" .basket-ul li").remove(); 
  
  //어레이에 있는 것들을 li에 담아 보여주기 
  $(".basket-ul").append("<li>"+ menusForGame +"</li>");
  })
}





// 어레이 항목 중 하나를 랜덤 추출하는 함수
// function randomPick() {

//   var todayNumber = Math.floor(Math.random()*menusForGame.length);
//   var todayMenu = menusForGame[todayNumber];

//   if(menusForGame.length === 0)  {
//     alert("선택된 항목이 없습니다.")
//   }
//   else  {
//     alert("오늘의 메뉴는" + todayMenu + "!");
//   }
  
// }




  $('#add-menu-btn').click(function() {

    var drdownCat = $('#drdown-category option:selected').val();
    var inputName = $('#menu-input').val();

    var addJsonMenu = new Object();

    //input에 입력한 걸 제이슨으로 만들기
    addJsonMenu.category = drdownCat;
    addJsonMenu.name = inputName;


    //위의 제이슨을 어레이에 새로 넣기
    menus.push(addJsonMenu);

    //1단, 3단 보이는 부분 지워주기
    $('.category-ul li').remove();

    //1단, 3단 새로 보여주기
    showList();

    //게임 바구니 리셋
    $(" .basket-ul li").remove(); 

    checkChange();

  })

</script>






<script>
  let theWheel = new Winwheel({
      'numSegments'  : 8,
      'outerRadius'  : 112,
      'textFontSize' : 14,
      'segments'     : 
      [
         {'fillStyle' : '#eae56f', 'text' : 'Prize 1'},
         {'fillStyle' : '#89f26e', 'text' : 'Prize 2'},
         {'fillStyle' : '#7de6ef', 'text' : 'Prize 3'},
         {'fillStyle' : '#e7706f', 'text' : 'Prize 4'},
         {'fillStyle' : '#eae56f', 'text' : 'Prize 5'},
         {'fillStyle' : '#89f26e', 'text' : 'Prize 6'},
         {'fillStyle' : '#7de6ef', 'text' : 'Prize 7'},
         {'fillStyle' : '#e7706f', 'text' : 'Prize 8'}
      ],
      'animation' :           // Specify the animation to use.
      {
          'type'     : 'spinToStop',
          'duration' : 5,     // Duration in seconds.
          'spins'    : 8,     // Number of complete spins.
          'callbackFinished' : alertPrize
      }
  });

  // Vars used by the code in this page to do power controls.
  let wheelPower    = 0;
  let wheelSpinning = false;



 
  function startSpin()
  {
      // Ensure that spinning can't be clicked again while already running.
      if (wheelSpinning == false) {

          theWheel.startAnimation();
          // wheelSpinning = true;
      }
  }

  function resetWheel()
  {
      theWheel.stopAnimation(false);  // Stop the animation, false as param so does not call callback function.
      theWheel.rotationAngle = 0;     // Re-set the wheel angle to 0 degrees.
      theWheel.draw();                // Call draw to render changes to the wheel.

      wheelSpinning = false;          // Reset to false to power buttons and spin can be clicked again.
  }


  function alertPrize(indicatedSegment)
  {
      alert("오늘의 메뉴는 " + indicatedSegment.text);
      wheelSpinning = false;
  }
</script>








  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>





</body>

</html>